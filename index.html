<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>WebInstrument — Stxrn</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root{
      --bg:#000; --panel:#0f0f0f; --panel2:#141414; --text:#eaeaea;
      --accent:#7cf; --muted:#999; --good:#6f6; --bad:#f66;
    }
    html,body{height:100%}
    body{background:var(--bg); margin:0; color:var(--text); font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif; line-height:1.5;}
    header{text-align:center; padding:24px 16px 8px;}
    .title{font-family:"Brush Script MT","Snell Roundhand","Comic Sans MS",cursive; font-size:42px; letter-spacing:.5px;}
    .subtitle{font-family:"Brush Script MT","Snell Roundhand","Comic Sans MS",cursive; font-size:22px; margin-top:6px;}
    .link-row{margin-top:8px; font-size:16px;}
    .link-row a{color:var(--accent); text-decoration:none; border-bottom:1px dotted var(--accent);}
    .emoji-splash{text-align:center; font-size:22px; opacity:.9; letter-spacing:2px; margin-top:10px;}
    .wrap{max-width:1000px; margin:0 auto; padding:12px 16px 24px;}
    .panel{background:linear-gradient(180deg,var(--panel),var(--panel2)); border:1px solid #1f1f1f; border-radius:14px; padding:16px; margin:12px 0; box-shadow:0 10px 24px rgba(0,0,0,.35);}
    h2{margin:0 0 10px; font-size:18px; letter-spacing:.3px;}
    .row{display:grid; grid-template-columns: 180px 1fr 120px; gap:12px; align-items:center; margin:10px 0;}
    .row label{color:#cfcfcf;}
    input[type="range"]{width:100%;}
    select,button,input[type="checkbox"]{font-size:14px;}
    .small{color:var(--muted); font-size:12px;}
    .chips{display:flex; gap:8px; flex-wrap:wrap; margin-top:6px; font-size:13px;}
    .chip{background:#111; border:1px solid #222; padding:4px 8px; border-radius:999px;}
    .btn{padding:8px 12px; border-radius:10px; border:1px solid #2a2a2a; background:#121212; color:var(--text); cursor:pointer;}
    .btn:active{transform:translateY(1px)}
    .good{color:var(--good)} .bad{color:var(--bad)}
    .grid2{display:grid; grid-template-columns:1fr 1fr; gap:16px;}
    #log{background:#0a0a0a; border:1px solid #1b1b1b; border-radius:10px; padding:10px; font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace; font-size:12px; max-height:240px; overflow:auto; white-space:pre-wrap;}
    @media (max-width:800px){ .row{grid-template-columns: 120px 1fr 80px} .grid2{grid-template-columns:1fr} }
  </style>
</head>
<body>
  <header>
    <div class="title">🎹🎧🎵 Welcome 2 WebInstrument 🎶🥁🎼</div>
    <div class="subtitle">Built by: Jayden Stern</div>
    <div class="link-row">
      for more click
      <a href="https://linktr.ee/stxrntheartist?utm_source=linktree_profile_share&ltsid=c8144ae5-97a2-4826-ab14-50953b2441ec" target="_blank" rel="noopener">HERE</a>
    </div>
    <div class="emoji-splash">🎷 🎸 🎻 🥁 🎛️ 🎚️ 🎙️ 🔊 🎶</div>
  </header>

  <div class="wrap">
    <div class="panel">
      <h2>Audio & MIDI Setup</h2>
      <div style="display:flex; gap:8px; align-items:center; flex-wrap:wrap;">
        <button id="startBtn" class="btn">▶️ Start Audio</button>
        <div id="audioStatus" class="small">Audio: <span class="bad">stopped</span></div>
        <div class="chip">Sample Rate: <span id="sr">—</span></div>
      </div>

      <div class="row">
        <label>🎛️ MIDI Device</label>
        <select id="midiSelect"></select>
        <button id="refreshBtn" class="btn">🔄 Refresh</button>
      </div>
      <div class="small">Status: <span id="midiStatus">Searching…</span></div>
      <div class="chips">
        <span class="chip">Note On/Off logging</span>
        <span class="chip">Poly OR Mono (glide)</span>
        <span class="chip">Same-note retrigger ✅</span>
      </div>
    </div>

    <div class="grid2">
      <div class="panel">
        <h2>Oscillators</h2>
        <div class="row">
          <label>Count (1–3)</label>
          <input id="oscCount" type="range" min="1" max="3" step="1" value="2" />
          <span id="oscCountVal">2</span>
        </div>
        <div class="row">
          <label>Waveform</label>
          <select id="waveform">
            <option value="sawtooth">sawtooth</option>
            <option value="square">square</option>
            <option value="triangle">triangle</option>
            <option value="sine">sine</option>
          </select>
          <span class="small">applies to all oscillators</span>
        </div>
      </div>

      <div class="panel">
        <h2>Mono</h2>
        <div class="row">
          <label>Mono (Legato)</label>
          <input id="mono" type="checkbox" />
          <span class="small">when on, new notes glide</span>
        </div>
        <div class="row">
          <label>Glide (ms)</label>
          <input id="glide" type="range" min="0" max="400" step="5" value="90" />
          <span id="glideVal">90</span>
        </div>
      </div>
    </div>

    <div class="grid2">
      <div class="panel">
        <h2>Delay</h2>
        <div class="row">
          <label>Delay Mix</label>
          <input id="delayMix" type="range" min="0" max="1" step="0.01" value="0.15" />
          <span id="delayMixVal">0.15</span>
        </div>
      </div>

      <div class="panel">
        <h2>Reverb</h2>
        <div class="row">
          <label>Reverb Mix</label>
          <input id="reverbMix" type="range" min="0" max="1" step="0.01" value="0.2" />
          <span id="reverbMixVal">0.20</span>
        </div>
      </div>
    </div>

    <div class="grid2">
      <div class="panel">
        <h2>Distortion</h2>
        <div class="row">
          <label>Drive</label>
          <input id="drive" type="range" min="0" max="1" step="0.01" value="0.0" />
          <span id="driveVal">0.00</span>
        </div>
      </div>

      <div class="panel">
        <h2>Gain</h2>
        <div class="row">
          <label>Master</label>
          <input id="master" type="range" min="0" max="1" step="0.01" value="0.5" />
          <span id="masterVal">0.50</span>
        </div>
      </div>
    </div>

    <div class="panel">
      <h2>Live Log</h2>
      <div id="log" aria-live="polite"></div>
    </div>
  </div>

  <!-- DO NOT TOUCH midi.js -->
  <script src="./midi.js"></script>
  <script src="./synth.js"></script>
  <script src="./main.js"></script>
</body>
</html>
